# 효과적인 대화법

> **이 문서의 목표:** Claude Code에게 어떻게 말해야 좋은 결과가 나오는지 패턴 익히기

---

## 1. 핵심 원칙: "왜(Why) + 뭘(What) + 제약(Constraints)"

Claude Code는 **의도를 이해할수록** 더 나은 결과를 냅니다.

### 나쁜 요청 vs 좋은 요청

```
❌ "API 만들어줘"
   → 뭐? 어떤 API? 어떤 스타일?

✅ "음악 업로드 REST API를 만들어줘.
    - 인증된 사용자만 업로드 가능
    - 파일은 MP3만 허용, 최대 10MB
    - 업로드 시 제목, 장르, 가격 정보도 함께 받음
    - 가격은 100원 이상, 10000원 이하"
```

### 3요소 공식

| 요소 | 설명 | 예시 |
|------|------|------|
| **Why** | 왜 이게 필요한지 | "쇼츠 크리에이터가 음악을 팔 수 있도록" |
| **What** | 구체적으로 뭘 만들지 | "음악 업로드 REST API" |
| **Constraints** | 제한 조건, 금지 사항 | "MP3만, 10MB 이하, 인증 필수" |

---

## 2. 상황별 요청 템플릿

### 새 기능 만들 때

```
"[기능 이름]을 만들어줘.

배경:
- [왜 이 기능이 필요한지]

요구사항:
- [구체적인 기능 1]
- [구체적인 기능 2]
- [구체적인 기능 3]

제약:
- [기술적 제약]
- [비즈니스 규칙]"
```

**실전 예시:**
```
"음악 검색 API를 만들어줘.

배경:
- 구매자가 원하는 음악을 빠르게 찾을 수 있어야 함

요구사항:
- 제목, 아티스트명, 장르로 검색 가능
- 페이징 지원 (기본 20개)
- 정렬: 최신순, 인기순, 가격순
- 검색 결과에 제목, 아티스트, 가격, 재생시간 포함

제약:
- 비로그인 사용자도 검색 가능
- 응답 시간 500ms 이내 목표"
```

### 버그 고칠 때

```
"[어디서] [무엇이] 잘못되고 있어.

현상:
- [실제로 일어나는 것]

기대 동작:
- [원래 이래야 하는 것]

재현 방법:
- [어떻게 하면 버그가 발생하는지]"
```

**실전 예시:**
```
"로그인 API에서 만료된 JWT 토큰으로 요청하면 500 에러가 나.

현상:
- 만료된 토큰 → 500 Internal Server Error
- 에러 메시지가 스택트레이스 전체를 노출

기대 동작:
- 만료된 토큰 → 401 Unauthorized
- 에러 메시지: 'Token has expired'

재현 방법:
- 로그인 → 토큰 받음 → 1시간 대기 → 해당 토큰으로 /api/music 호출"
```

### 리팩토링 요청할 때

```
"[대상]을 리팩토링해줘.

문제:
- [현재 코드의 문제점]

방향:
- [어떤 방향으로 개선하고 싶은지]

금지:
- [바꾸지 말아야 할 것]"
```

### 코드 리뷰 요청할 때

```
"[파일/기능]을 리뷰해줘. 특히 [관심 포인트]를 봐줘."
```

---

## 3. 대화 도중 방향 수정하기

### 작업 중 피드백

```
✅ "좋은데, 여기서 하나만 바꾸자. 가격 필드를 Integer 말고 BigDecimal로"
✅ "잠깐, 이 부분은 다시 생각해보자"
✅ "아 이건 내가 생각한 거랑 좀 다른데. [구체적 차이 설명]"
```

### 범위 변경 (신중하게)

```
✅ "범위를 조금 줄이자. 장르 검색은 다음에 하고, 제목 검색만 먼저"
✅ "하나 추가하고 싶은데, 검색 시 최근 인기 태그도 같이 보여주면 좋겠어"

❌ "아 전체 다 엎자. MongoDB로 바꿔." (→ 새 REQ가 필요한 수준)
```

---

## 4. "마법의 문장들" — 상황별 유용한 표현

### 탐색/이해 요청

```
"현재 코드 구조를 분석해줘"
"이 에러가 왜 나는지 원인을 찾아줘"
"MusicService의 로직을 설명해줘"
"지금 어떤 API 엔드포인트가 있는지 정리해줘"
```

### 설계 상담

```
"음악 업로드 기능을 만들려는데, 어떻게 설계하면 좋을지 제안해줘"
"JWT 리프레시 토큰 전략을 어떻게 잡을지 옵션을 보여줘"
"이런 요구사항인데, 테이블 설계를 어떻게 하면 좋을까?"
```

### 품질 관련

```
"이 코드에 테스트를 추가해줘"
"보안 관점에서 이 API를 검토해줘"
"빌드가 되는지 확인해줘" (또는 슬래시 커맨드: /build-check)
"테스트 돌려줘" (또는: /test)
```

### 진행 관리

```
"지금까지 한 거 정리해줘"
"남은 작업이 뭐야?"
"이 기능은 여기서 마무리하자"
```

---

## 5. 슬래시 커맨드 (/) 활용

자주 쓰는 작업은 슬래시 커맨드로 빠르게 실행할 수 있습니다.

### 가장 많이 쓸 커맨드

| 커맨드 | 용도 | 언제 쓰나? |
|--------|------|----------|
| `/build-check` | 빌드 검증 | 코드 수정 후 "빌드 되나?" 확인 |
| `/test` | 테스트 실행 | 기능 구현 후 테스트 확인 |
| `/test-coverage` | 커버리지 확인 | 테스트 충분한지 확인 |

### 워크플로우 커맨드 (고급)

| 커맨드 | 용도 | 언제 쓰나? |
|--------|------|----------|
| `/create-req` | REQ 초안 자동 생성 | 새 기능 요청 시 |
| `/create-wi-handoff-packet` | WI 핸드오프 패킷 생성 | 작업 분할 시 (MA가 주로 사용) |
| `/create-wi-evidence-pack` | 증거 팩 생성 | 작업 완료 후 기록 |

---

## 6. 한국어 vs 영어 — 언제 어떤 언어를?

이 프로젝트의 언어 정책:

| 상황 | 언어 | 이유 |
|------|------|------|
| **대화** | 한국어 | 자연스러운 소통 |
| **코드** | 영어 | Java 국제 관례 |
| **커밋 메시지** | 한국어 | 팀 가독성 |
| **시스템 문서** (docs/) | 영어 | 에이전트 최적화 |
| **REQ 문서** | 한국어 (예외) | 사용자 승인 문서 |

**실전:** 그냥 한국어로 말하면 됩니다. 에이전트가 알아서 맥락에 맞게 처리합니다.

---

## 7. 응답이 기대와 다를 때

### "이건 내가 원한 게 아닌데?"

```
✅ "아니, 내가 원한 건 [구체적으로 뭘 원했는지]야.
    지금 결과는 [뭐가 다른지]."
```

### "너무 과하게/부족하게 했을 때"

```
✅ "이건 너무 복잡해. 더 단순하게 [어떻게] 해줘"
✅ "에러 처리가 빠졌어. [어떤 경우]도 처리해줘"
```

### "잘 모르겠을 때"

```
✅ "이 부분 좀 설명해줘. 왜 이렇게 했어?"
✅ "다른 방법은 없어? 옵션을 보여줘"
```

---

## 8. 대화 효율을 높이는 고급 팁

### 1) 컨텍스트를 한 번에 주기

```
❌ (3번의 왕복)
"API 만들어줘" → "아 인증도 필요해" → "아 그리고 페이징도"

✅ (1번에 완료)
"인증 필요한 음악 목록 API를 만들어줘. 페이징 포함."
```

### 2) 참조 파일 명시

```
"MusicService.java를 참고해서 비슷한 패턴으로 OrderService를 만들어줘"
"application.yml의 DB 설정을 확인하고 연결 테스트를 해봐"
```

### 3) 성공 기준 제시

```
"이 API가 완성되면:
 - POST /api/music로 음악 등록 가능
 - GET /api/music/{id}로 조회 가능
 - 등록 시 JWT 인증 필요
 - 테스트 코드 포함"
```

---

**다음:** [시스템 한눈에 보기](03-시스템-한눈에-보기.md) — 에이전트, 스킬, 문서 체계 전체 구조
