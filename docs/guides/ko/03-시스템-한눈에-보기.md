# 시스템 한눈에 보기

> **이 문서의 목표:** ATStudio의 멀티에이전트 시스템 전체 구조를 한 눈에 파악하기

---

## 1. 전체 아키텍처 — "AI 개발팀"

```
당신 (사장님/PM)
  │
  ▼
MA (메인 에이전트 = 현장 소장)
  │
  ├─→ ps  (기획자)       ← 요구사항 정리
  ├─→ sa  (아키텍트)     ← 설계, ADR
  ├─→ se  (개발자)       ← 코드 작성
  ├─→ re  (QA)           ← 테스트, 검증
  ├─→ pg  (보안 전문가)  ← 보안 검토
  ├─→ cr  (코드 리뷰어)  ← 코드 리뷰
  ├─→ eo  (관리자)       ← 거버넌스, 정책
  ├─→ tr  (리서처)       ← 기술 조사
  ├─→ uv  (UX 전문가)    ← API 명세, UI
  ├─→ qa  (빌드 전문가)  ← 빌드/품질
  └─→ docops (문서 관리자) ← 문서 정리
```

### 핵심: 당신은 MA하고만 대화합니다

- 당신이 직접 `se`나 `pg`를 호출하지 않습니다
- MA가 적절한 에이전트를 선택하고 작업을 분배합니다
- 결과도 MA가 취합해서 보고합니다

---

## 2. 11개 에이전트 — 역할별 상세

### Tier 1: 가장 자주 쓰는 에이전트

| 에이전트 | 이름 | 하는 일 | 당신에게 보이는 결과 |
|---------|------|--------|-------------------|
| **ps** | Product Strategist | 당신의 요청을 REQ(요구사항 문서)로 정리 | REQ 초안 (승인 요청) |
| **sa** | Software Architect | 시스템 설계, DB 설계, API 설계 | 설계 문서, ADR |
| **se** | Software Engineer | **Java 코드 작성** (Controller, Service, Entity 등) | 생성/수정된 소스코드 |
| **re** | Reliability Engineer | JUnit5 테스트 작성, 회귀 테스트 | 테스트 코드, 테스트 결과 |

### Tier 2: 특정 상황에서 쓰는 에이전트

| 에이전트 | 이름 | 하는 일 | 언제 호출되나? |
|---------|------|--------|--------------|
| **pg** | Privacy Guardian | Spring Security, JWT 보안, 비밀번호 정책 | 인증/보안 관련 작업 |
| **cr** | Code Reviewer | Java 코드 리뷰, 베스트 프랙티스 확인 | 코드 품질 검토 시 |
| **qa** | Quality Assurance | 빌드 검증, 통합 품질 테스트 | 빌드/배포 전 |

### Tier 3: 보조 에이전트

| 에이전트 | 이름 | 하는 일 | 언제 호출되나? |
|---------|------|--------|--------------|
| **eo** | Ensemble Overseer | 정책 준수 감시, 라우팅 결정 | 정책 위반/모호한 상황 |
| **tr** | Technology Researcher | 라이브러리 비교, 기술 조사 | "뭘 쓸까?" 결정 시 |
| **uv** | UX/UI Virtuoso | API 명세(Swagger), UI 관련 | API 문서화, UI 설계 |
| **docops** | Documentation Ops | 문서 동기화, 인덱스 관리 | 문서 정합성 문제 |

### 실전 예시: "음악 업로드 API 만들어줘" 요청 시 흐름

```
1. ps → REQ 작성 ("음악 업로드 요구사항")
2. sa → 설계 ("테이블 구조, API 스펙, 파일 저장 전략")
3. pg → 보안 검토 ("파일 업로드 보안, 인증 필요")
4. se → 구현 ("Entity, DTO, Repository, Service, Controller")
5. re → 테스트 ("단위 테스트, 통합 테스트")
6. docops → 문서 정리 ("API 문서, 변경 기록")
```

---

## 3. 스킬(Skills) — 자동화된 절차

스킬은 **자주 반복되는 작업을 표준화한 것**입니다. 레시피라고 생각하면 됩니다.

### 당신이 직접 쓸 수 있는 스킬

| 스킬 | 명령어 | 설명 | 사용 예시 |
|------|--------|------|----------|
| 빌드 확인 | `/build-check` | 프로젝트 빌드 가능 여부 검증 | "빌드 돼?" |
| 테스트 | `/test` | 전체 테스트 실행 | "테스트 돌려" |
| 커버리지 | `/test-coverage` | 테스트 커버리지 분석 | "커버리지 얼마야?" |
| 문서 검증 | `/validate-docs` | 문서 링크/참조 무결성 확인 | "문서 깨진 거 없어?" |

### MA가 내부적으로 쓰는 스킬 (알아두면 좋음)

| 스킬 | 명령어 | 설명 |
|------|--------|------|
| REQ 생성 | `/create-req` | 당신의 요청을 표준 REQ 문서로 변환 |
| WI 핸드오프 | `/create-wi-handoff-packet` | 에이전트에게 전달할 작업 지시서 생성 |
| 증거 팩 | `/create-wi-evidence-pack` | 작업 완료 후 증거 기록 표준화 |
| 컨텍스트 엔지니어링 | `/ce` | 에이전트에게 최소한의 필요 문서만 주입 |
| 프롬프트 강화 | `/pe` | 에이전트 지시를 더 정확하게 강화 |

---

## 4. 문서 체계 — 3단 피라미드

```
        ┌─────────┐
        │ Tier 0  │  ← 헌법 (모든 에이전트 필수)
        │ 표준/원칙│
        ├─────────┤
        │ Tier 1  │  ← 정책/아키텍처 (역할별 참조)
        │ 정책/설계│
        ├─────────┤
        │ Tier 2  │  ← 가이드/템플릿 (상황별 참조)
        │ 가이드   │
        └─────────┘
```

### 각 Tier 설명

**Tier 0 — 헌법** (`docs/standards/`)
- 모든 에이전트가 매번 참조하는 최상위 규칙
- `core-principles.md` — 시스템 헌법
- `development-standards.md` — 코딩 표준
- `glossary.md` — 용어 사전

**Tier 1 — 정책** (`docs/policies/`, `docs/architecture/`)
- 특정 역할의 에이전트가 참조하는 정책
- `security-policy.md` — JWT, 비밀번호, 시크릿 관리
- `execution-policy.md` — 실행 승인 레벨
- `system-design.md` — 시스템 아키텍처

**Tier 2 — 가이드** (`docs/guides/`, `docs/templates/`)
- 상황별 실행 가이드와 템플릿
- `development-workflow.md` — 7단계 워크플로우
- 각종 템플릿 (ADR, DB 설계, API 설계 등)

### 당신이 알아야 할 핵심 디렉토리

| 디렉토리 | 성격 | 당신의 관계 |
|----------|------|-----------|
| `docs/project/` | **당신의 기획 문서** | 자유롭게 작성/수정 |
| `deliverables/user/` | 에이전트가 보내는 **보고서** | 읽고 승인/피드백 |
| `deliverables/agent/` | 에이전트 간 **작업 기록** | 보통 안 봐도 됨 |
| `src/` | 실제 **서비스 코드** | 결과물 확인 |
| `.claude/` | **에이전트 시스템 내부** | 건드리지 않음 |

---

## 5. 산출물 2-Set 시스템

모든 작업은 **2가지 문서**를 생성합니다:

```
작업 완료
  ├─→ User-facing (당신용)
  │     deliverables/user/REQ-*.md        ← 요구사항 정의서
  │     deliverables/user/WI-*-summary.md ← 작업 결과 요약
  │
  └─→ Agent-facing (에이전트용)
        deliverables/agent/WI-*-handoff.md      ← 작업 지시서
        deliverables/agent/WI-*-evidence-pack.md ← 작업 증거
```

### 왜 2가지인가?

| User-facing | Agent-facing |
|------------|-------------|
| "뭘 했는지" 요약 | "어떻게 했는지" 상세 |
| 당신이 승인하는 용도 | 에이전트가 추적/재현하는 용도 |
| 짧고 핵심만 | 파일 경로, 명령어, 로그 포함 |

**실전:** 보통 `deliverables/user/` 폴더의 문서만 확인하면 됩니다.

---

## 6. 설정 파일들 (참고)

에이전트 시스템의 "두뇌"에 해당하는 설정 파일들:

| 파일 | 역할 | 수정 필요 시점 |
|------|------|--------------|
| `CLAUDE.md` | 프로젝트 전체 지침 | 기술 스택 변경, 규칙 추가 |
| `.claude/config/workspace.json` | 프로젝트 정보, Phase 설정 | Phase 전환 시 |
| `.claude/config/context-injection-rules.json` | 에이전트별 문서 주입 규칙 | 새 에이전트/문서 추가 시 |

**중요:** 이 파일들을 직접 수정하지 말고, 에이전트에게 요청하세요.

---

## 7. 전체 흐름 요약 (한 장 정리)

```
[당신의 요청]
     │
     ▼
[MA: 의도 파악] ──→ 질문 필요? ──→ [당신에게 질문]
     │                                    │
     ▼                                    ▼
[MA: REQ 초안 작성] ←─────────────── [답변 반영]
     │
     ▼
[당신: REQ 승인] ──→ 거부? ──→ [수정 후 재제출]
     │
     ▼
[MA: WI 분할 + 에이전트 위임]
     │
     ├─→ [sa: 설계] ──→ [결과]
     ├─→ [se: 구현] ──→ [결과]
     ├─→ [re: 테스트] ──→ [결과]
     └─→ [pg: 보안] ──→ [결과]
              │
              ▼
[MA: 결과 취합 + 보고]
     │
     ▼
[당신: 결과 확인 + 피드백]
     │
     ▼
[완료 또는 다음 반복]
```

---

**다음:** [워크플로우 실전](04-워크플로우-실전.md) — 실제 기능 개발 시나리오