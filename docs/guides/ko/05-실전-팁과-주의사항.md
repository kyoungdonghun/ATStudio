# 실전 팁과 주의사항

> **이 문서의 목표:** Claude Code 사용 시 시행착오를 줄이고 효율을 높이는 노하우

---

## 1. 토큰 절약 팁 (비용 관리)

Claude Code는 대화마다 "토큰"을 소모합니다. 비싼 자원이므로 효율적으로 쓰세요.

### 토큰을 많이 쓰는 행동

| 행동 | 토큰 소모 | 대안 |
|------|----------|------|
| 긴 파일 전체를 "읽어줘" | 높음 | "MusicService의 getMusic 메서드만 봐줘" |
| 매번 처음부터 설명 | 높음 | CLAUDE.md에 한 번 적으면 매 세션 자동 로드 |
| 여러 번 왕복 대화 | 중간 | 요청을 한 번에 구체적으로 |
| 불필요한 탐색 | 중간 | "어디에 있는지 모르겠어"보다 경로 힌트 제공 |

### 토큰을 아끼는 습관

1. **한 번에 구체적으로 요청** — 3번 왕복보다 1번 상세 요청이 저렴
2. **파일 경로 직접 제공** — "어딘가에 있는 서비스 파일" 대신 "MusicService.java"
3. **범위 한정** — "전체 코드 리뷰" 대신 "MemberService의 signup 메서드 리뷰"
4. **세션 활용** — 하나의 세션에서 관련 작업을 연속으로 처리

---

## 2. CLAUDE.md 활용 극대화

### "매번 말하는 것"은 CLAUDE.md에 적기

```
❌ 매 세션마다: "참고로 우리는 Java 17 쓰고, Lombok 쓰고, DTO랑 Entity 분리해야 해"
✅ CLAUDE.md에 한 번 적으면 끝 (이미 적혀있음!)
```

### CLAUDE.md에 추가하면 좋은 것들

```markdown
## 추가 규칙 (예시)
- 모든 API 응답은 ResponseEntity로 감싸기
- 날짜 포맷: ISO 8601 (yyyy-MM-dd'T'HH:mm:ss)
- 로그는 SLF4J 사용, INFO 레벨 기본
- 테이블 이름은 단수형 (music, member — musics (X))
```

### 주의: CLAUDE.md는 "길이 제한"이 있음

- 너무 길면 토큰을 많이 소모
- 핵심 규칙만 간결하게 유지
- 상세 내용은 `docs/` 내 별도 문서로 분리하고 경로만 참조

---

## 3. 안전한 작업 습관

### 파괴적 작업 전 확인

Claude Code는 다음 상황에서 반드시 확인을 요청합니다:

| 파괴적 작업 | 위험도 | 확인 방법 |
|------------|--------|----------|
| 파일 삭제 | 높음 | "정말 삭제할까요?" |
| DB 스키마 변경 | 높음 | 영향 범위 보고 후 승인 |
| Git force push | 매우 높음 | 절대 자동 실행 안 함 |
| 대량 파일 수정 | 중간 | 변경 목록 먼저 제시 |

### Git 사용 팁

```
✅ 작업 전: "현재 Git 상태 확인해줘"
✅ 중간 중간: "여기까지 커밋해둬"
✅ 큰 변경 전: "브랜치 만들어서 작업하자"
```

### 비밀정보 주의

```
❌ "DB 비밀번호가 mysql1234인데..."
✅ "application.yml에 DB 설정을 환경변수로 바꿔줘"

에이전트는 비밀번호, API 키 등을 코드에 하드코딩하지 않도록 훈련되어 있지만,
당신이 직접 노출하면 대화 로그에 남을 수 있습니다.
```

---

## 4. 에러/문제 대응

### 빌드 실패 시

```
1단계: /build-check 실행
2단계: 에러 메시지 확인
3단계: "이 에러 고쳐줘" (보통 MA가 자동 수정 시도)
```

### 테스트 실패 시

```
1단계: /test 실행
2단계: 실패한 테스트 확인
3단계: "실패 원인 분석하고 고쳐줘"
```

### "뭔가 이상한데?" 느낌이 들 때

```
✅ "잠깐, 이 코드 설명해줘. 왜 이렇게 했어?"
✅ "이 부분 보안 검토 한 번 해줘"
✅ "다른 방법은 없어?"
```

### 에이전트가 막혔을 때

```
✅ "문제가 뭐야? 현재 상황 정리해줘"
✅ "이 방향 말고 다른 접근 방식 제안해줘"
✅ 최후의 수단: "이 작업은 중단하고, 다시 시작하자"
```

---

## 5. 효율적인 세션 관리

### 세션 시작 시

```
✅ "오늘은 [목표]를 하려고 해"
   → MA가 관련 컨텍스트를 빠르게 로드

✅ "지난번에 MemberController까지 만들었는데, 이어서 하자"
   → 이전 작업 컨텍스트 복원
```

### 세션 종료 시

```
✅ "오늘 한 거 정리해줘"
   → 진행 상황 요약 + 남은 작업 목록

✅ "여기까지 커밋해둬"
   → 작업 내용 안전하게 저장
```

### 한 세션에서 너무 많이 하지 않기

- 세션이 길어지면 컨텍스트가 압축됨 (초기 대화 내용 손실 가능)
- **하나의 REQ → 완료 → 다음 REQ** 패턴이 가장 효율적
- 큰 기능은 여러 세션에 걸쳐 진행해도 괜찮음

---

## 6. 문서 체계 활용

### docs/project/ — 당신의 기획 공간

이 폴더에 넣으면 에이전트가 참조할 수 있습니다:

```
docs/project/
├── roadmap.md         ← Phase 정의, 마일스톤
├── domain-model.md    ← 엔티티 관계, 핵심 개념
├── api-spec.md        ← API 설계
├── db-schema.md       ← DB 스키마
├── feature-list.md    ← 기능 목록
└── business-rules.md  ← 비즈니스 규칙 (가격, 수수료 등)
```

### 노션 문서 연동 팁

노션에 이미 기획 문서가 있다면:

```
1. 노션에서 마크다운으로 내보내기
2. docs/project/ 폴더에 복사
3. 에이전트에게 "docs/project/roadmap.md 읽어봐" 요청
4. 이후 요청 시 자동 참조됨
```

---

## 7. 흔한 오해 바로잡기

### "Claude Code가 알아서 다 해주겠지?"

**현실:** 명확한 목표와 제약 조건을 제시해야 좋은 결과가 나옵니다.
AI는 강력하지만, **방향을 잡아주는 건 당신의 역할**입니다.

### "한 번에 완벽한 결과가 나와야 해"

**현실:** 반복적 개선이 자연스러운 과정입니다.
첫 결과 → 피드백 → 수정 → 최종 결과. 이게 정상입니다.

### "시스템 문서를 다 읽어야 사용할 수 있어"

**현실:** `CLAUDE.md`와 이 한글 가이드만 읽으면 충분합니다.
나머지 문서는 **에이전트가 내부적으로 참조**하는 것이지, 당신이 외울 필요 없습니다.

### "에이전트를 직접 선택해서 호출해야 해"

**현실:** MA가 자동으로 적절한 에이전트를 선택합니다.
"보안 검토해줘"라고 하면 MA가 알아서 `pg`를 호출합니다.

### "REQ 프로세스가 귀찮다"

**현실:** 코드 100줄 쓴 후 "이건 내가 원한 게 아니었어"라고 되돌리는 것보다,
REQ 5분 확인이 **시간/비용 모두 절약**됩니다.

---

## 8. Phase 1 (지금) vs Phase 2 (나중)

### 지금 (Phase 1: Spring Boot + Thymeleaf)

- Java/Spring Boot 백엔드 개발에 집중
- Thymeleaf로 간단한 UI
- `/eslint`, `/prettier`, `/react-best-practices` 스킬은 **비활성화** 상태

### 나중 (Phase 2: React 전환 시)

- React SPA + TypeScript 프론트엔드 추가
- 관련 스킬 활성화
- **전환 방법:** "Phase 2로 전환해줘"라고 요청하면 MA가 설정 변경

---

## 9. 체크리스트: "나는 잘 쓰고 있나?"

- [ ] 요청을 구체적으로 하고 있나? (모호한 요청 지양)
- [ ] REQ를 꼼꼼히 확인하고 승인하나?
- [ ] CLAUDE.md에 반복되는 규칙을 적어두었나?
- [ ] 파괴적 작업 시 확인 절차를 건너뛰지 않나?
- [ ] 비밀정보를 대화에 직접 노출하지 않나?
- [ ] 한 세션에서 하나의 목표에 집중하나?
- [ ] 결과물을 확인하고 피드백을 주나?

---

**다음:** [토큰과 비용 이해하기](06-토큰과-비용-이해하기.md) — 토큰 개념과 비용 관리